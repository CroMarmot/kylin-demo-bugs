"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pluginName=void 0,exports.default=function(e){var o=e.program,r=(e.kylinApp,e.hint),l=e.webpack,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=o.rawArgs.indexOf("--allow-mock-prod")>=0,i=["boolean"==typeof o.mock?o.mock:void 0,void 0===o.mock?void 0:!!o.mock,"boolean"==typeof a.enable?a.enable:void 0,!1].filter(function(e){return"boolean"==typeof e})[0];o.prod&&!t&&i&&(r.warn("[Mock]","prod构建关闭mock功能"),i=!1);var u=["string"==typeof o.mock?o.mock:"","string"==typeof a.config?a.config:"","./mock/mock.config.js"].filter(Boolean)[0],c=_path2.default.resolve(cwd,u);return i&&(_fs2.default.existsSync(c)?r.success("[Mock]","加载 LunaMock 配置 "+u):(i=!1,r.error("[Mock]",_chalk2.default.red("没有找到")+" ["+_chalk2.default.red(u)+"] "+_chalk2.default.red("，将使用默认配置，无法使用自定义mock功能，")+"\n请参考"+_chalk2.default.yellow("http://gitlab.alipay-inc.com/luna/luna-mock/blob/master/demo/mock.config.js")))),i?{babel:null,webpack:(0,_build2.default)(c,l),browser:require.resolve("./runtime/browser.js")}:{}};var _build=require("./runtime/build.js"),_build2=_interopRequireDefault(_build),_path=require("path"),_path2=_interopRequireDefault(_path),_fs=require("fs"),_fs2=_interopRequireDefault(_fs),_chalk=require("chalk"),_chalk2=_interopRequireDefault(_chalk);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var cwd=process.cwd(),pluginName=exports.pluginName="@ali/kylin-plugin-mock";