!function(e){!function(e){var t=!1,n=e.Promise;if(n){var o=null,a=null;try{a=(o=n.resolve()).then}catch(e){}o instanceof n&&"function"==typeof a&&!n.cast&&(t=!0)}}(e)}(self),function(e){"use strict";var t,n,o="AlipayJSBridge",a=e[o],r=navigator.userAgent||navigator.swuserAgent,i=e.window,u=e.document,c=e.console,s=e.parseInt,l=[],d={getBAPSI:{isListening:!1,lastState:2,on:function(){d.getBAPSI.isListening||(a.call("startMonitorBackgroundAudio"),d.getBAPSI.isListening=!0,p.on("getBackgroundAudioPlayedStateInfo",d.getBAPSI.listener))},off:function(){p.off("getBackgroundAudioPlayedStateInfo",d.getBAPSI.listener),a.call("stopMonitorBackgroundAudio"),d.getBAPSI.isListening=!1},listener:function(e){var t=(e.data||{}).status,n=["backgroundAudioPause","backgroundAudioPlay","backgroundAudioStop"][t];n&&t!==d.getBAPSI.lastState&&(p.trigger(n),d.getBAPSI.lastState=t)}}},f={openBluetoothAdapter:{},closeBluetoothAdapter:{},getBluetoothAdapterState:{},startBluetoothDevicesDiscovery:{b:function(e){return z(e._)&&(e._=[e._]),k(e,{_:"services"}),e}},stopBluetoothDevicesDiscovery:{},getBluetoothDevices:{b:function(e){return z(e._)&&(e._=[e._]),k(e,{_:"services"}),e},a:function(e){return j(e.devices)&&x(e.devices,function(e,t){k(t,{manufacturerData:"advertisData"})}),e}},getConnectedBluetoothDevices:{a:function(e){return j(e.devices)&&x(e.devices,function(e,t){k(t,{manufacturerData:"advertisData"})}),e}},connectBLEDevice:{b:function(e){return k(e,{_:"deviceId"}),e}},disconnectBLEDevice:{},writeBLECharacteristicValue:{},readBLECharacteristicValue:{},notifyBLECharacteristicValueChange:{},getBLEDeviceServices:{b:function(e){return k(e,{_:"deviceId"}),e}},getBLEDeviceCharacteristics:{},onBLECharacteristicValueChange:{m:"BLECharacteristicValueChange"},offBLECharacteristicValueChange:{m:"BLECharacteristicValueChange"},onBluetoothAdapterStateChange:{},offBluetoothAdapterStateChange:{},onBLEConnectionStateChanged:{m:"BLEConnectionStateChanged"},offBLEConnectionStateChanged:{m:"BLEConnectionStateChanged"},onBluetoothDeviceFound:{a:function(e){return k(e,{manufacturerData:"advertisData"})}},offBluetoothDeviceFound:{},pushBizWindow:{},compressImage:{b:function(e){return e.level=O(e.level)?4:e.level,k(e,{_:"apFilePaths",level:"compressLevel%d"})},d:function(e,t){M()?a.call("compressImage",e,t):m(t,{apFilePaths:e.apFilePaths||[]})}},getLaunchParams:{d:function(e,t){p.launchParams=i.ALIPAYH5STARTUPPARAMS||a.startupParams||{},V(t)&&t(p.launchParams)}},onTabClick:{},offTabClick:{},onShare:{m:"onShare"},offShare:{m:"onShare"},connectSocket:{b:function(e){return k(e,{headers:"header"})}},sendSocketMessage:{b:function(e){return k(e,{_:"data"})}},closeSocket:{},onSocketOpen:{},offSocketOpen:{},onSocketMessage:{},offSocketMessage:{},onSocketError:{},offSocketError:{},onSocketClose:{},offSocketClose:{},alert:{b:function(e){return O((e=k(e,{_:"content",content:"message%s",buttonText:"button%s"})).title)||(e.title=C("%s",e.title)),e}},confirm:{b:function(e){return O((e=k(e,{_:"content%s",content:"message%s",confirmButtonText:"okButton%s",cancelButtonText:"cancelButton%s"})).title)||(e.title=C("%s",e.title)),e},a:function(e){return k(e,{ok:"confirm"})}},showToast:{m:"toast",b:function(e){return k(e,{_:"content%s"}),z(e.content)||(e.content=C("%s",e.content)),e}},hideToast:{},showLoading:{b:function(e){return k(e,{_:"content",content:"text%s"})}},hideLoading:{},showNavigationBarLoading:{m:"showTitleLoading"},hideNavigationBarLoading:{m:"hideTitleLoading"},setNavigationBar:{b:function(e){var t="setTitle",n="setTitleColor",o="setBarBottomLineColor",a={setTitle:{},setTitleColor:{},setBarBottomLineColor:{}};return a[t]=k(a[t],{_:"title",title:"title%s",image:"image%b"},e),a[n]=k(a[n],{backgroundColor:"color%c",reset:"reset"},e),a[o]=k(a[o],{borderBottomColor:"color%c"},e),a},d:function(e,t){var n="setTitle",o="setTitleColor",r="setBarBottomLineColor",i={};J(e[n])||a.call(n,e[n]),J(e[r])||(a.call(r,e[r]),F(e[r].color)&&(i.error=2,i.errorMessage="颜色值不合法")),J(e[o])?m(t,i):a.call(o,e[o],function(e){i=$(e,i),t(i)})}},showTabBar:{b:function(e){if(e.action="create",e.activeIndex=e.activeIndex||0,k(e,{color:"textColor%c",activeColor:"selectedColor%c",activeIndex:"selectedIndex%d"}),j(e.items)){var t=e.items;e.items=[],t.forEach(function(t,n){(t=k($({},t),{title:"name%s",tag:"tag%s",icon:"icon%b",activeIcon:"activeIcon%b",badge:"redDot%s"},{tag:n,badge:O(t.badge)?"-1":t.badge})).icon=C("%b",t.icon),t.activeIcon=C("%b",t.activeIcon),e.items.push(t)})}return e},d:function(e,t,n){O(d.showTabBar)?d.showTabBar={opt:n}:c.error("showTabBar must be called at most once"),p.on("tabClick",function(e){var n={};k(n,{tag:"index%d"},{tag:H(e.data)&&e.data.tag?e.data.tag:"0"}),t(n)}),a.call("tabBar",e,function(e){_("showTabBar",e)})}},setTabBarBadge:{m:"tabBar",b:function(e){return e.action="redDot",k(e,{index:"tag%s",badge:"redDot%s"},{index:e.index}),e}},showActionSheet:{m:"actionSheet",b:function(e){if(k(e,{items:"btns",cancelButtonText:"cancelBtn%s"}),j(e.btns)){var t=e.btns;e.btns=[],t.forEach(function(t){return e.btns.push(t+"")})}return O(e.cancelBtn)&&(e.cancelBtn="取消"),e},a:function(e,t){return j(t.btns)&&e.index===t.btns.length&&(e.index=-1),e}},redirectTo:{b:function(e){return k(e,{_:"url"}),H(e.data)&&(e.url=I(e.url,e.data)),e},d:function(e){e.url&&i.location.replace(e.url)}},pushWindow:{b:function(e){return k(e,{_:"url",params:"param"}),e.url.indexOf("?")>-1&&c.warn("try opt.data instead of querystring"),e.url.indexOf("__webview_options__")>-1&&c.warn("try opt.params instead of __webview_options__"),H(e.data)&&(e.url=I(e.url,e.data),delete e.data),e}},popWindow:{b:function(e){return H((e=g(e)).data)||(e.data={___forResume___:e.data}),e}},popTo:{b:function(e){var t;return k(e,{_:(t=void 0,U(e._)&&(t="index"),z(e._)&&(t="urlPattern"),t)}),H(e.data)||(e.data={___forResume___:e.data}),e}},allowPullDownRefresh:{d:function(e){var t="onPullDownRefresh";k(e,{_:"allow"}),e.allow=!!O(e.allow)||!!e.allow,H(d[t])?d[t].allow=e.allow:(d[t]={allow:e.allow},p.onPullDownRefresh()),d[t].allow?a.call("restorePullToRefresh"):d[t].event&&d[t].event.preventDefault()}},choosePhoneContact:{m:"contact"},chooseAlipayContact:{m:"chooseContact",b:function(e){return k(e,{_:"count"}),O(e.count)&&(e.count=1),1===e.count?e.type="single":(e.type="multi",e.count<=0||e.count>10?e.multiMax=10:e.multiMax=e.count),delete e.count,e},a:function(e){return j(e.contacts)&&e.contacts.forEach(function(e){k(e,{headImageUrl:"avatar",name:"realName"}),delete e.from}),e}},share:{b:function(e){var t={},n={};return t.onlySelectChannel=["ALPContact","ALPTimeLine","ALPCommunity","Weibo","DingTalkSession","SMS","Weixin","WeixinTimeLine","QQ","QQZone"],L(e,"bizType")&&(t.bizType=e.bizType),delete(n=$({},e)).bizType,delete n.onlySelectChannel,k(n,{image:"imageUrl"}),d.share={startShare:t,shareToChannel:n},e},d:function(e,t){!1===e.showToolBar&&a.call("setToolbarMenu",{menus:[],override:!0}),a.call("startShare",d.share.startShare,function(e){var n=d.share.shareToChannel;e.channelName?a.call("shareToChannel",{name:e.channelName,param:n},t):t(e)})}},datePicker:{b:function(e){switch(k(e,{_:"formate",formate:"mode",currentDate:"beginDate",startDate:"minDate",endDate:"maxDate"}),e.mode){case"HH:mm:ss":e.mode=0;break;case"yyyy-MM-dd":e.mode=1;break;case"yyyy-MM-dd HH:mm:ss":e.mode=2;break;default:e.mode=1}return e},a:function(e){return z(e.date)&&(e.date=e.date.replace(/\//g,"-").trim()),e}},chooseCity:{m:"getCities",b:function(e){var t,n;function o(e){var t;return j(e)&&(t=[],e.forEach(function(e){t.push(k({},{city:"name",adCode:"adcode%s",spell:"pinyin"},e))}),e=t),e}return k(e,{showHotCities:"needHotCity",cities:"customCities",hotCities:"customHotCities"}),!0===e.showLocatedCity?(e.currentCity="",e.adcode=""):(delete e.currentCity,delete e.adcode),delete e.showLocatedCity,t=e.customCities,O(e.customCities)||(e.customCities=o(t)),n=e.customHotCities,O(e.customHotCities)||(e.customHotCities=o(n)),e},a:function(e){return k(e,{adcode:"adCode"}),e}},onBack:{a:function(e){var t={};return H(d.onBack)?d.onBack.event=e:d.onBack={event:e,allowButton:!0},!1===d.onBack.allowButton&&e.preventDefault(),t.backAvailable=d.onBack.allowButton,t},e:{handleEventData:!1}},offBack:{},onResume:{a:function(e){var t={};return O(e.data)||(t.data=e.data),L(e.data,"___forResume___")&&(t.data=e.data.___forResume___),t},e:{handleEventData:!1}},offResume:{},onPause:{},offPause:{},onPageResume:{a:function(e){var t={};return O(e.data)||(t.data=e.data),L(e.data,"___forResume___")&&(t.data=e.data.___forResume___),t},e:{handleEventData:!1}},offPageResume:{},onPagePause:{},offPagePause:{},onTitleClick:{},offTitleClick:{},onPullDownRefresh:{m:"firePullToRefresh",a:function(e){var t={},n="onPullDownRefresh";return H(d[n])?d[n].event=e:d[n]={event:e,allow:!0},!1===d[n].allow&&d[n].event.preventDefault(),t.refreshAvailable=d[n].allow,t},e:{handleEventData:!1}},offPullDownRefresh:{m:"firePullToRefresh"},onNetworkChange:{d:function(e,t,n,o){var a=function(){return p.getNetworkType(t)};v("h5NetworkChange",o,a),p.on("h5NetworkChange",a)}},offNetworkChange:{d:function(e,t,n,o){y("h5NetworkChange",o)}},onAccelerometerChange:{b:function(){a.call("watchShake",{monitorAccelerometer:!0})},a:function(e){var t={};return k(t,{x:"x",y:"y",z:"z"},H(e.data)?e.data:e),t},e:{handleEventData:!1}},offAccelerometerChange:{b:function(){a.call("watchShake",{monitorAccelerometer:!1})}},onCompassChange:{b:function(){a.call("watchShake",{monitorCompass:!0})},a:function(e){var t={};return k(t,{direction:"direction"},H(e.data)?e.data:e),t},e:{handleEventData:!1}},offCompassChange:{b:function(){a.call("watchShake",{monitorCompass:!1})}},onBackgroundAudioPlay:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioPlay:{},onBackgroundAudioPause:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioPause:{},onBackgroundAudioStop:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioStop:{},onAppResume:{},offAppResume:{},onAppPause:{},offAppPause:{},getNetworkType:{a:function(e){return O(e.networkInfo)||(e.networkType=function(e){z(e)&&(e=e.toUpperCase());return e}(e.networkInfo)),delete e.err_msg,delete e.networkInfo,e}},scan:{b:function(e){return k(e,{_:"type"}),e.type=e.type||"qr",e},a:function(e){return(e.qrCode||e.barCode)&&(e.code=e.qrCode||e.barCode,delete e.qrCode,delete e.barCode),e}},watchShake:{b:function(e){return J(e)&&(e=null),e}},getLocation:{b:function(e){return k(e,{accuracy:"horizontalAccuracy",type:"requestType%d"}),O(e.requestType)&&(e.requestType=2),M()&&(O(e.isHighAccuracy)&&(e.isHighAccuracy=!0),O(e.isNeedSpeed)&&(e.isNeedSpeed=!0)),e},a:function(e){return k(e,{citycode:"cityCode",adcode:"adCode"}),O(e.city)&&e.province&&(e.city=e.province),e.latitude&&(e.latitude=C("%s",e.latitude)),e.longitude&&(e.longitude=C("%s",e.longitude)),e.accuracy&&(e.accuracy=C("%f",e.accuracy)),e.speed&&(e.speed=C("%f",e.speed)),e}},getSystemInfo:{a:function(e){if(!L(e,"error")){e.pixelRatio=C("%f",e.pixelRatio),e.windowWidth=C("%d",e.windowWidth),e.language=(e.language||"").replace(/\s?\w+\/((?:\w|-)+)$/,"$1"),e.windowHeight=C("%d",e.windowHeight);try{N()&&p.compareVersion("10.0.12")<0&&(e.windowHeight=i.screen.height-64)}catch(e){}}return e}},vibrate:{},getServerTime:{},previewImage:{m:"imageViewer",b:function(e){return k(e,{_:"urls",current:"init%d"}),O(e.init)&&(e.init=0),e.images=[],(e.urls||[]).forEach(function(t){e.images.push({u:t})}),delete e.urls,e}},chooseImage:{b:function(e){return k(e,{_:"count%d"}),O(e.count)&&(e.count=1),z(e.sourceType)&&(e.sourceType=[e.sourceType]),e},a:function(e){return k(e,{errorCode:"error",errorDesc:"errorMessage",localIds:"apFilePaths",tempFilePaths:"apFilePaths"}),delete e.scene,delete e.localIds,delete e.tempFilePaths,z(e.apFilePaths)&&(e.apFilePaths=R(e.apFilePaths)),e}},chooseVideo:{b:function(e){return k(e,{_:"maxDuration%d"}),z(e.sourceType)&&(e.sourceType=[e.sourceType]),z(e.camera)&&(e.camera=[e.camera]),e},a:function(e){switch(k(e,{errorCode:"error",errorDesc:"errorMessage",msg:"errorMessage",localId:"apFilePath",tempFilePath:"apFilePath",tempFile:"apFilePath"}),delete e.localId,delete e.tempFilePath,delete e.tempFile,e.error){case 0:delete e.error;break;case 1:e.error=2;break;case 2:e.error=10;break;case 3:e.error=11;break;case 4:e.error=12}return e}},uploadFile:{b:function(e){var t;return k(e,{headers:"header",fileName:"name",fileType:"type"}),t=e.filePath,/^[a-z0-9|]+$/i.test(t)&&(e.localId=e.filePath,delete e.filePath),e},a:function(e){return 2===e.error&&(e.error=11),e}},saveImage:{b:function(e,t){return k(e,{_:"url",url:"src"}),V(t)&&(e.cusHandleResult=!0),e}},downloadFile:{b:function(e){return k(e,{headers:"header"}),e},a:function(e){return k(e,{tempFilePath:"apFilePath",errorCode:"error"}),delete e.tempFilePath,e}},setSessionData:{b:function(e){return H((e=g(e)).data)||(e.data={data:e.data}),x(e.data,function(t,n){e.data[t]=JSON.stringify(n)}),e}},getSessionData:{b:function(e){return z(e._)&&(e.keys=[e._]),j(e._)&&(e.keys=e._),delete e._,e},a:function(e){return x(e.data,function(t,n){e.data[t]=R(n)}),e}},startBizService:{b:function(e){return k(e,{_:"name",params:"param%s"}),e}},tradePay:{b:function(e){return k(e,{_:"orderStr"}),e}},getAuthCode:{b:function(e){return k(e,{_:"scopes"}),z(e.scopes)?e.scopeNicks=[e.scopes]:j(e.scopes)?e.scopeNicks=e.scopes:e.scopeNicks=["auth_base"],delete e.scopes,e},a:function(e){return k(e,{authcode:"authCode"}),e}},getAuthUserInfo:{a:function(e){return k(e,{nick:"nickName",userAvatar:"avatar"}),e}},openInBrowser:{b:function(e){return k(e,{_:"url"})}},openLocation:{b:function(e){return O(e.scale)&&(e.scale=15),e}},showPopMenu:{b:function(e){if(k(e,{_:"items",items:"menus"}),H(d.showPopMenu)?d.showPopMenu.menus={}:d.showPopMenu={menus:{}},j(e.menus)){var t=e.menus;e.menus=[],t.forEach(function(t,n){z(t)&&(t={title:t}),O((t=k($({},t),{title:"name%s",tag:"tag%s",badge:"redDot%s"},{tag:n,title:t.title,badge:O(t.badge)?"-1":t.badge})).icon)||(t.icon=C("%b",t.icon)),e.menus.push(t),d.showPopMenu.menus[t.name]=n})}return e},d:function(e,t){!0!==d.showPopMenu.onEvent&&(d.showPopMenu.onEvent=!0,p.on("popMenuClick",function(e){var n={};k(n,{title:"index%d"},{title:H(e.data)&&e.data.title?d.showPopMenu.menus[e.data.title]:"-1"}),t(n)})),a.call("showPopMenu",e,function(e){_("showPopMenu",e)})}},setOptionButton:{m:"setOptionMenu",b:function(e){if(z(e._)&&(e.title=e._,delete e._),j(e._)&&(e.items=e._,delete e._),k(e,{items:"menus",type:"iconType",badge:"redDot%s"}),O(e.icon)||(e.icon=C("%b",e.icon)),H(d.setOptionButton)?d.setOptionButton.menus=[]:d.setOptionButton={menus:[]},j(e.menus)){var t=e.menus;e.menus=[],t.forEach(function(n,o){O((n=k($({},n),{type:"icontype",badge:"redDot%s"},{badge:O(n.badge)?"-1":n.badge})).icon)||(n.icon=C("%b",n.icon)),e.menus.unshift(n),d.setOptionButton.menus[t.length-1-o]=o}),e.menus.length>0&&O(e.override)&&(e.override=!0)}if(V(d.setOptionButton.onEvent)&&p.off("optionMenu",d.setOptionButton.onEvent),V(e.onClick)){var n=e.onClick,o=function(e){var t=0,o={};H(e.data)&&U(e.data.index)&&d.setOptionButton.menus.length>0&&(t=d.setOptionButton.menus[e.data.index]),o.index=C("%d",t),n(o)};d.setOptionButton.onEvent=o,!0!==e.reset&&p.on("optionMenu",o),delete e.onClick}return e},d:function(e,t){a.call("setOptionMenu",e,t),N()&&m(t,{}),p.showOptionButton()}},showOptionButton:{m:"showOptionMenu"},hideOptionButton:{m:"hideOptionMenu"},showBackButton:{},hideBackButton:{},allowBack:{d:function(e){k(e,{_:"allowButton"}),e.allowButton=!!O(e.allowButton)||!!e.allowButton,"boolean"==typeof e.allowGesture&&a.call("setGestureBack",{val:e.allowGesture}),H(d.onBack)?d.onBack.allowButton=e.allowButton:(d.onBack={allowButton:e.allowButton},p.onBack()),!1===e.allowButton&&d.onBack.event&&d.onBack.event.preventDefault()}},startRecord:{m:"startAudioRecord",b:function(e){return k(e,{maxDuration:"maxRecordTime%f",minDuration:"minRecordTime%f",bizType:"business"},{maxDuration:e.maxDuration||60,minDuration:e.minDuration||1}),O(e.business)&&(e.business="apm-h5"),e},a:function(e){return k(e,{tempFilePath:"apFilePath",identifier:"apFilePath"}),e}},stopRecord:{m:"stopAudioRecord"},cancelRecord:{m:"cancelAudioRecord"},playVoice:{m:"startPlayAudio",b:function(e){return k(e,{_:"filePath",filePath:"identifier",bizType:"business"}),O(e.business)&&(e.business="apm-h5"),e},a:function(e){return k(e,{identifier:"filePath"}),e}},pauseVoice:{m:"pauseAudioPlay"},resumeVoice:{m:"resumeAudioPlay"},stopVoice:{m:"stopAudioPlay"},makePhoneCall:{d:function(e,t){var n="tel:";k(e,{_:"number"}),n+=e.number,a.call("openInBrowser",{url:n},t)}},playBackgroundAudio:{b:function(e){return k(e,{_:"url",url:"audioDataUrl%s",title:"audioName%s",singer:"singerName%s",describe:"audioDescribe%s",logo:"audioLogoUrl%s",cover:"coverImgUrl%s",bizType:"business"},{bizType:e.bizType||"apm-h5"}),e},a:function(e){return k(e,{describe:"errorMessage"}),P(e,12,0),e}},pauseBackgroundAudio:{a:function(e){return k(e,{describe:"errorMessage"}),P(e,12,0),e}},stopBackgroundAudio:{a:function(e){return k(e,{describe:"errorMessage"}),P(e,12,0),e}},seekBackgroundAudio:{b:function(e){return k(e,{_:"position",bizType:"business"},{bizType:e.bizType||"apm-h5"}),e.position=C("%f",e.position),e},a:function(e){return k(e,{describe:"errorMessage"}),P(e,12,0),e}},getBackgroundAudioPlayerState:{a:function(e){return k(e,{audioDataUrl:"url",describe:"errorMessage"}),P(e,12,0),e}}},p={version:"3.1.0",ua:r,isAlipay:T(/AlipayClient/),alipayVersion:(n=r.match(/AlipayClient[a-zA-Z]*\/(\d+(?:\.\d+)+)/),n&&n.length?n[1]:""),compareVersion:function(e){var t=p.alipayVersion.split(".");e=e.split(".");for(var n,o,a=0;a<t.length;a++){if((n=s(e[a],10)||0)>(o=s(t[a],10)||0))return-1;if(n<o)return 1}return 0},parseQueryString:function(e){var t,n={},o=e||i.location.search,a={true:!0,false:!1};o=(o=0===o.indexOf("?")?o.substr(1):o)?o.split("&"):"";for(var r=0;r<o.length;r++)(t=o[r].split("="))[1]=decodeURIComponent(t[1]),t[1]=O(a[t[1]])?t[1]:a[t[1]],n[t[0]]=t[1];return A("parseQueryString"),n},enableDebug:function(){p.debug=!0},on:function(e,t){var n="ready"===e;n||"back"===e?u.addEventListener(n?o+"Ready":e,t,!1):(e=e.replace(/ready/,o+"Ready")).split(/\s+/g).forEach(function(e){u.addEventListener(e,t,!1)})},off:function(e,t){u.removeEventListener(e,t,!1)},trigger:function(e,t){var n=u.createEvent("Events");return n.initEvent(e,!1,!0),n.data=t||{},u.dispatchEvent(n),n},ready:function(e){if(D())return new Promise(t);function t(t){h()?(V(e)&&e(),V(t)&&t()):p.on("ready",function(){h(),V(e)&&e(),V(t)&&t()})}t()},call:function(){var e=W(arguments);if(D())return p.ready().then(function(){return new Promise(t)});function t(t,n){var o,r,i,u,s,l,d,h,m,g;o=e[0]+"",r=e[1],O(i=e[2])&&V(r)&&(i=r,r={}),!H(r)&&e.length>=2&&(r={_:r}),O(r)&&(r={}),u=function(e,t,n){var o=f[e],a=o&&o.b?o.b($({},t),n):t,r=w(e,"optionModifier");if(V(r)){var i=r(a,n);H(i)&&(a=i)}return a}(o,r,i),s=function(e,t){var n={};V((t=t||{}).success)&&(n.success=t.success,delete t.success);V(t.fail)&&(n.fail=t.fail,delete t.fail);V(t.complete)&&(n.complete=t.complete,delete t.complete);return n}(0,u),O(u)&&c.error("please confirm "+o+".before() returns the options."),m=function(e){var t=f[e];return!(!t||!t.d)&&t.d}(o),g=L(r,"_")?r._:r,S(o,g,u),d=function(e){return B("on",e)}(o),h=function(e){return B("off",e)}(o),l=function(e){var a=void 0;e=e||{},d&&!1!==w(o,"handleEventData")&&(a=function(e){var t={};O(e.data)||(t=H(t=e.data)?t:{data:t});return t}(e)),O(a=function(e,t,n,o,a){var r=f[e],i=r&&r.a?r.a((c=t,"[object Event]"===q(c)?t:$({},t)),n,o,a):$({},t),u=w(e,"resultModifier");var c;if(V(u)){var s=u(i,n,o,a);H(s)&&(i=s)}return i}(o,a||e,u,r,i))&&c.error("please confirm "+o+".after() returns the result."),a=_(o,a),S(o,g,u,e,a),L(a,"error")||L(a,"errorMessage")?(V(n)&&n(a),V(s.fail)&&s.fail(a)):(V(t)&&t(a),V(s.success)&&s.success(a)),V(s.complete)&&s.complete(a),V(i)&&i(a)},V(m)?m(u,l,r,i):d?(v(d,i,l,s),p.on(d,l)):h?y(h,i):a.call(function(e){var t=f[e];return t&&t.m?t.m:e}(o),u,l),A(o)}h()?t():l.push(e)},extendJSAPI:function(e,t){!t&&z(e)&&(e=[e]),x(e,function(n){var o=n;if(!0!==t){var a=e[o];V(a)&&(a={doing:a}),z(a)&&(o=a,(a={})[o]={}),f[o]=k(f[o]||{},{mapping:"m",before:"b",doing:"d",after:"a"},a),H(a.extra)&&(f[o].e=f[o].e||{},f[o].e=$(f[o].e,a.extra))}p[o]=p.call.bind(null,o)},!0)}};function h(){return(a=a||e[o])&&a.call}function m(e,t){setTimeout(function(){e(t)},1)}function g(e,t){var n=!1;return t=t||"data",L(e,"_")?(e[t]=e._,delete e._):(x(e,function(e){e!==t&&(n=!0)}),n&&(n=e,(e={})[t]=n)),e}function b(e,t,n){var o,a=!1;return O(e)||(d.EVENTS||(d.EVENTS={}),d.EVENTS[e]||(d.EVENTS[e]={callbacks:[]}),d.EVENTS[e].callbacks||(d.EVENTS[e].callbacks=[]),d.EVENTS[e].callbacks.forEach(function(e,n){e.cb===t&&(a=e,o=n)}),n&&U(o)&&d.EVENTS[e].callbacks.splice(o,1)),a}function v(e,t,n,o){b(e,t)||d.EVENTS[e].callbacks.push({cb:t,_cb:n,_cbSFC:o})}function y(e,t){var n=b(e,t,!0);V(t)?n&&p.off(e,n._cb):(d.EVENTS[e].callbacks.forEach(function(t){p.off(e,t._cb)}),d.EVENTS[e].callbacks=[])}function B(e,t){var n=f[t],o=!1,a="off"===e?/^off([A-Z])(\w+)/:/^on([A-Z])(\w+)/;return n&&a.test(t)&&(t=t.match(a),!(o=n.m)&&t[1]&&t[2]&&(o=function(e){z(e)&&(e=e.toLowerCase());return e}(t[1])+t[2])),o}function w(e,t){var n=f[e]||{};return(n.e||n.extra||{})[t]}function _(e,t){return L(t,"error")&&(t.error=s(t.error,10)),!1!==w(e,"handleResultSuccess")&&P(t),0===t.error&&(delete t.error,delete t.errorMessage),t.error>0&&t.error<10&&c.error(e,t),t}function P(e,t,n){return n=!O(n)&&n,L(e,"error")||e.success!==n||(e.error=U(t)?t:2),delete e.success,e}function C(e,t){return"%s"===e&&(t=function(e){var t=e;if(H(e)||j(e))try{t=JSON.stringify(e)}catch(e){}else t=e+"";return t}(t)),"%c"===e&&(t=function(e){var t=""+e;0===t.indexOf("#")&&(t=t.substr(1));3===t.length&&(t=t.replace(/(.)/g,"$1$1"));F(t=s(t,16))&&c.error(e+" is invalid hex color.");return t}(t)),"%b"===e&&(t=function(e){z(e)&&(e=e.replace(/^data:(\/|\w|\-|\.)+;base64,/i,""));return e}(t)),"%d"===e&&(t=s(t,10)),"%f"===e&&(t=parseFloat(t)),t}function k(e,t,n){var o;return n=n||{},x(t,function(a,r){var i,u,c;i=t[a],u=(i||"").match(/(\w+)(%\w)$/i),c={k:i},u&&(c.k=u[1],c.t=u[2]),!O(r=(o=c).k)&&(L(e,a)||L(n,a))&&O(e[r])&&(e[r]=C(o.t,O(n[a])?e[a]:n[a]),r!==a&&delete e[a])}),e}p.extendJSAPI.mapping=k,p.extendJSAPI.toType=C,p.isAlipay||c.warn("Run alipayjsapi.js in Alipay please!"),p.extendJSAPI(f,!0),p.on("ready",function(){l.length&&function e(){E(function(){var t=l.shift();p.call.apply(null,t),l.length&&e()})}()});var A=function(){var e=[],t=void 0,n=!1;function o(){setTimeout(function(){if(e.length>0){var o=e.join("|");p.ready(function(){a.call("remoteLog",{type:"monitor",bizType:"ALIPAYJSAPI",logLevel:1,actionId:"MonitorReport",seedId:"ALIPAYJSAPI_INVOKE_COUNTER",param1:o})}),p.debug&&c.info("REMOTE_LOG_QUEUE>",e),e=[]}!O(t)&&clearTimeout(t),n=!1},0)}return p.on("back",function(){o()}),function(a){e.push(a),e.length>=6?o():n||(n=!0,t=setTimeout(function(){o()},5e3))}}();function S(){var e,t,n,o,a,r,i=W(arguments);p.debug&&(e=i[0],t=i[1],n=i[2],o=i[3],a=i[4],r=[i.length>3?"RETURN>":"INVOKE>",e,L(t,"_")?t._:t,n],i.length>3&&r.push(o),i.length>4&&r.push(a),c.info(r))}function T(e){return e.test(r)}var E=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.msRequestAnimationFrame||function(e,t){i.setTimeout(function(){e(+new Date,t)},1e3/60)};function D(){if(void 0===t){var n=!1,o=e.Promise;if(o){var a=null,r=null;try{r=(a=o.resolve()).then}catch(e){}a instanceof o&&V(r)&&!o.cast&&(n=!0)}n||c.warn("try callback since no Promise detected"),t=n}return t}function I(e,t){var n,o=t;return H(t)&&(n=[],x(t,function(e,t){n.push(e+"="+encodeURIComponent(O(t)?"":t))}),o=n=n.join("&")),/\?/.test(e)?/&$/.test(e)||/\?$/.test(e)||(o="&"+o):o="?"+o,e+o}function L(e,t){return!(!H(e)&&!j(e))&&e.hasOwnProperty(t)}function x(e,t,n){var o,a;if(!n&&function(e){return!!e&&!V(e)&&(j(e)||U(e.length))}(e)){for(o=0;o<e.length;o++)if(!1===t(o,e[o]))return e}else for(a in e)if(!1===t(a,e[a]))return e;return e}function R(e){try{e=JSON.parse(e)}catch(t){c.warn(t,e)}return e}function M(){return T(/android/i)}function N(){return T(/iPad|iPod|iPhone|iOS/i)}function O(e){return"[object Undefined]"===q(e)}function F(e){return"NaN"===s(e,10).toString()}function V(e){return"[object Function]"===q(e)}function z(e){return"string"==typeof e}function H(e){return"[object Object]"===q(e)}function U(e){return"[object Number]"===q(e)}function j(e){return"[object Array]"===q(e)}function q(e){return Object.prototype.toString.call(e)}function J(e){for(var t in e)return!1;return!0}function W(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.length-t,o=new Array(n),a=0;a<n;a++)o[a]=e[a+t];return o}function $(e){var t,n,o=W(arguments,1);if(!H(e))return e;for(var a=0,r=o.length;a<r;a++)for(n in t=o[a])hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}e._AP=p,"undefined"!=typeof module&&module.exports?module.exports=p:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return p}):e.ap=e.AP=p}(self);