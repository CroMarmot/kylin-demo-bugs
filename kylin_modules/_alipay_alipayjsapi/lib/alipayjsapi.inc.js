!function(e){!function(e){var t=!1,n=e.Promise;if(n){var a=null,o=null;try{o=(a=n.resolve()).then}catch(e){}a instanceof n&&"function"==typeof o&&!n.cast&&(t=!0)}}(e)}(self),function(e){"use strict";var t,n,a="AlipayJSBridge",o=e[a],r=navigator.userAgent||navigator.swuserAgent,i=e.window,u=e.document,c=e.console,s=e.parseInt,l=[],d={getBAPSI:{isListening:!1,lastState:2,on:function(){d.getBAPSI.isListening||(o.call("startMonitorBackgroundAudio"),d.getBAPSI.isListening=!0,p.on("getBackgroundAudioPlayedStateInfo",d.getBAPSI.listener))},off:function(){p.off("getBackgroundAudioPlayedStateInfo",d.getBAPSI.listener),o.call("stopMonitorBackgroundAudio"),d.getBAPSI.isListening=!1},listener:function(e){var t=(e.data||{}).status,n=["backgroundAudioPause","backgroundAudioPlay","backgroundAudioStop"][t];n&&t!==d.getBAPSI.lastState&&(p.trigger(n),d.getBAPSI.lastState=t)}}},f={fetchCDP:{m:"getCdpSpaceInfo"},feedbackCDP:{m:"cdpFeedback"},snapshot:{},saveBizServiceResult:{},setStorage:{m:"setAPDataStorage",b:function(e){var t=h();return S(e,{data:"value",bizType:"business"}),e.value=x({APDataStorage:e.value}),e.key=x(e.key),e.type=q(e.type)?"user":e.type,q(e.business)&&t&&(e.business=t),e}},getStorage:{m:"getAPDataStorage",b:function(e){var t=h();return S(e,{_:"key",bizType:"business"}),e.key=x(e.key),e.type=q(e.type)?"user":e.type,q(e.business)&&t&&(e.business=t),e},a:function(e){if(11===e.error&&(e.data=null,delete e.error,delete e.errorMessage,delete e.success),M(e,"data")){var t=O(e.data);e.data=K(t)?t.APDataStorage:t}return e}},removeStorage:{m:"removeAPDataStorage",b:function(e){var t=h();return S(e,{_:"key",bizType:"business"}),e.key=x(e.key),e.type=q(e.type)?"user":e.type,q(e.business)&&t&&(e.business=t),e}},clearStorage:{m:"clearAPDataStorage",b:function(e){var t=h();return S(e,{bizType:"business"}),e.type=q(e.type)?"user":e.type,q(e.business)&&t&&(e.business=t),e}},httpRequest:{b:function(e){if(e.method=V(e.method)||"GET",e.dataType=F(e.dataType)||"json",S(e,{_:"url",dataType:"responseType"}),K(e.data)&&(e.data=L(e.data)),"GET"===e.method&&J(e.data)&&(e.url=R(e.url,e.data)),e.responseType="base64"!==F(e.responseType)?"text":"base64",e.headers=e.headers||{},z()){var t=[],n=void 0;for(var a in e.headers)M(e.headers,a)&&((n={})[a]=e.headers[a],t.push(n));e.headers=t}return e},a:function(e,t,n){if(n.dataType=F(n.dataType)||"json","json"===n.dataType&&e.data&&(e.data=O(e.data)),"base64"===n.dataType&&e.data&&e.headers&&(e.data=function(e,t){e&&t&&(e="data:"+t+";base64,"+e);return e}(e.data,e.headers["Content-Type"])),!q(e.status)){var a=e.status+"";/^[45]/.test(a)&&(e.error=19,e.errorMessage="http status error")}return e}},startApp:{b:function(e){return S(e,{_:"appId",params:"param"})}},setClipboard:{b:function(e){return S(e,{_:"content",content:"text"})}},getClipboard:{a:function(e){return S(e,{text:"content"}),delete e.text,e}},getUserInfo:{a:function(e){return S(e,{iconUrl:"avatar"})}},getConfig:{b:function(e){return S(e,{_:"configKeys",keys:"configKeys"}),J(e.configKeys)&&(e.configKeys=[e.configKeys]),N(e.configKeys,function(t,n){"mgw"===n&&(e.configKeys[t]="rpcUrl")}),e},a:function(e){return e.data&&(M(e.data,"rpcUrl")&&(e.data.mgw=e.data.rpcUrl,delete e.data.rpcUrl),N(e.data,function(t,n){e[t]=n}),delete e.data),e}},remoteLog:{},isSupportShortCut:{a:function(e){return S(e,{result:"isSupport"})}},setShortCut:{b:function(e){return S(e,{title:"appName",icon:"iconBitmap"})}},removeShortCut:{b:function(e){return S(e,{title:"appName",icon:"iconBitmap"})}},exitApp:{},login:{},sendSMS:{a:function(e){if(e.status){switch(e.status){case"Success":e={};break;case"Failed":e.error=21,e.errorMessage="发送失败";break;case"Canceled":e.error=22,e.errorMessage="用户取消发送"}delete e.status}return e}},getAllContacts:{a:function(e){var t=[];return e&&!M(e,"error")&&(N(e,function(e,n){t.push({mobile:e,name:n})}),e={contacts:t}),e}},setScreenBrightness:{b:function(e){return S(e,{_:"brightness"})}},getScreenBrightness:{},isInstalledApp:{b:function(e){return S(e,{packageName:"packagename"})},a:function(e){return S(e,{installed:"isInstalled"})}},preRender:{b:function(e){return S(e,{_:"url"}),K(e.windowParams)||(e.windowParams={}),e.url&&q(e.windowParams.url)&&(e.windowParams.url=e.url),delete e.url,e.params&&q(e.windowParams.param)&&(e.windowParams.param=e.params),delete e.params,e.windowParams.url.indexOf("?")>-1&&c.warn("try opt.data instead of querystring"),e.windowParams.url.indexOf("__webview_options__")>-1&&c.warn("try opt.params instead of __webview_options__"),K(e.data)&&(e.windowParams.url=R(e.windowParams.url,e.data),delete e.data),e}},clearRender:{b:function(e){return K(e.range)||(e.range={}),e.start&&q(e.range.location)&&(e.range.location=e.start),delete e.start,e.length&&q(e.range.length)&&(e.range.length=e.length),delete e.length,e}},finishRender:{},rpc:{b:function(e){return S(e,{_:"operationType"}),e.requestData&&!$(e.requestData)&&K(e.requestData)&&!M(e,"type")&&(e.requestData=[e.requestData]),e},e:{handleResultSuccess:!1}},openBluetoothAdapter:{},closeBluetoothAdapter:{},getBluetoothAdapterState:{},startBluetoothDevicesDiscovery:{b:function(e){return J(e._)&&(e._=[e._]),S(e,{_:"services"}),e}},stopBluetoothDevicesDiscovery:{},getBluetoothDevices:{b:function(e){return J(e._)&&(e._=[e._]),S(e,{_:"services"}),e},a:function(e){return $(e.devices)&&N(e.devices,function(e,t){S(t,{manufacturerData:"advertisData"})}),e}},getConnectedBluetoothDevices:{a:function(e){return $(e.devices)&&N(e.devices,function(e,t){S(t,{manufacturerData:"advertisData"})}),e}},connectBLEDevice:{b:function(e){return S(e,{_:"deviceId"}),e}},disconnectBLEDevice:{},writeBLECharacteristicValue:{},readBLECharacteristicValue:{},notifyBLECharacteristicValueChange:{},getBLEDeviceServices:{b:function(e){return S(e,{_:"deviceId"}),e}},getBLEDeviceCharacteristics:{},onBLECharacteristicValueChange:{m:"BLECharacteristicValueChange"},offBLECharacteristicValueChange:{m:"BLECharacteristicValueChange"},onBluetoothAdapterStateChange:{},offBluetoothAdapterStateChange:{},onBLEConnectionStateChanged:{m:"BLEConnectionStateChanged"},offBLEConnectionStateChanged:{m:"BLEConnectionStateChanged"},onBluetoothDeviceFound:{a:function(e){return S(e,{manufacturerData:"advertisData"})}},offBluetoothDeviceFound:{},pushBizWindow:{},compressImage:{b:function(e){return e.level=q(e.level)?4:e.level,S(e,{_:"apFilePaths",level:"compressLevel%d"})},d:function(e,t){z()?o.call("compressImage",e,t):g(t,{apFilePaths:e.apFilePaths||[]})}},getLaunchParams:{d:function(e,t){p.launchParams=i.ALIPAYH5STARTUPPARAMS||o.startupParams||{},j(t)&&t(p.launchParams)}},onTabClick:{},offTabClick:{},onShare:{m:"onShare"},offShare:{m:"onShare"},connectSocket:{b:function(e){return S(e,{headers:"header"})}},sendSocketMessage:{b:function(e){return S(e,{_:"data"})}},closeSocket:{},onSocketOpen:{},offSocketOpen:{},onSocketMessage:{},offSocketMessage:{},onSocketError:{},offSocketError:{},onSocketClose:{},offSocketClose:{},alert:{b:function(e){return q((e=S(e,{_:"content",content:"message%s",buttonText:"button%s"})).title)||(e.title=C("%s",e.title)),e}},confirm:{b:function(e){return q((e=S(e,{_:"content%s",content:"message%s",confirmButtonText:"okButton%s",cancelButtonText:"cancelButton%s"})).title)||(e.title=C("%s",e.title)),e},a:function(e){return S(e,{ok:"confirm"})}},showToast:{m:"toast",b:function(e){return S(e,{_:"content%s"}),J(e.content)||(e.content=C("%s",e.content)),e}},hideToast:{},showLoading:{b:function(e){return S(e,{_:"content",content:"text%s"})}},hideLoading:{},showNavigationBarLoading:{m:"showTitleLoading"},hideNavigationBarLoading:{m:"hideTitleLoading"},setNavigationBar:{b:function(e){var t="setTitle",n="setTitleColor",a="setBarBottomLineColor",o={setTitle:{},setTitleColor:{},setBarBottomLineColor:{}};return o[t]=S(o[t],{_:"title",title:"title%s",image:"image%b"},e),o[n]=S(o[n],{backgroundColor:"color%c",reset:"reset"},e),o[a]=S(o[a],{borderBottomColor:"color%c"},e),o},d:function(e,t){var n="setTitle",a="setTitleColor",r="setBarBottomLineColor",i={};G(e[n])||o.call(n,e[n]),G(e[r])||(o.call(r,e[r]),H(e[r].color)&&(i.error=2,i.errorMessage="颜色值不合法")),G(e[a])?g(t,i):o.call(a,e[a],function(e){i=Y(e,i),t(i)})}},showTabBar:{b:function(e){if(e.action="create",e.activeIndex=e.activeIndex||0,S(e,{color:"textColor%c",activeColor:"selectedColor%c",activeIndex:"selectedIndex%d"}),$(e.items)){var t=e.items;e.items=[],t.forEach(function(t,n){(t=S(Y({},t),{title:"name%s",tag:"tag%s",icon:"icon%b",activeIcon:"activeIcon%b",badge:"redDot%s"},{tag:n,badge:q(t.badge)?"-1":t.badge})).icon=C("%b",t.icon),t.activeIcon=C("%b",t.activeIcon),e.items.push(t)})}return e},d:function(e,t,n){q(d.showTabBar)?d.showTabBar={opt:n}:c.error("showTabBar must be called at most once"),p.on("tabClick",function(e){var n={};S(n,{tag:"index%d"},{tag:K(e.data)&&e.data.tag?e.data.tag:"0"}),t(n)}),o.call("tabBar",e,function(e){P("showTabBar",e)})}},setTabBarBadge:{m:"tabBar",b:function(e){return e.action="redDot",S(e,{index:"tag%s",badge:"redDot%s"},{index:e.index}),e}},showActionSheet:{m:"actionSheet",b:function(e){if(S(e,{items:"btns",cancelButtonText:"cancelBtn%s"}),$(e.btns)){var t=e.btns;e.btns=[],t.forEach(function(t){return e.btns.push(t+"")})}return q(e.cancelBtn)&&(e.cancelBtn="取消"),e},a:function(e,t){return $(t.btns)&&e.index===t.btns.length&&(e.index=-1),e}},redirectTo:{b:function(e){return S(e,{_:"url"}),K(e.data)&&(e.url=R(e.url,e.data)),e},d:function(e){e.url&&i.location.replace(e.url)}},pushWindow:{b:function(e){return S(e,{_:"url",params:"param"}),e.url.indexOf("?")>-1&&c.warn("try opt.data instead of querystring"),e.url.indexOf("__webview_options__")>-1&&c.warn("try opt.params instead of __webview_options__"),K(e.data)&&(e.url=R(e.url,e.data),delete e.data),e}},popWindow:{b:function(e){return K((e=b(e)).data)||(e.data={___forResume___:e.data}),e}},popTo:{b:function(e){var t;return S(e,{_:(t=void 0,W(e._)&&(t="index"),J(e._)&&(t="urlPattern"),t)}),K(e.data)||(e.data={___forResume___:e.data}),e}},allowPullDownRefresh:{d:function(e){var t="onPullDownRefresh";S(e,{_:"allow"}),e.allow=!!q(e.allow)||!!e.allow,K(d[t])?d[t].allow=e.allow:(d[t]={allow:e.allow},p.onPullDownRefresh()),d[t].allow?o.call("restorePullToRefresh"):d[t].event&&d[t].event.preventDefault()}},choosePhoneContact:{m:"contact"},chooseAlipayContact:{m:"chooseContact",b:function(e){return S(e,{_:"count"}),q(e.count)&&(e.count=1),1===e.count?e.type="single":(e.type="multi",e.count<=0||e.count>10?e.multiMax=10:e.multiMax=e.count),delete e.count,e},a:function(e){return $(e.contacts)&&e.contacts.forEach(function(e){S(e,{headImageUrl:"avatar",name:"realName"}),delete e.from}),e}},share:{b:function(e){var t={},n={};return t.onlySelectChannel=["ALPContact","ALPTimeLine","ALPCommunity","Weibo","DingTalkSession","SMS","Weixin","WeixinTimeLine","QQ","QQZone"],M(e,"bizType")&&(t.bizType=e.bizType),delete(n=Y({},e)).bizType,delete n.onlySelectChannel,S(n,{image:"imageUrl"}),d.share={startShare:t,shareToChannel:n},e},d:function(e,t){!1===e.showToolBar&&o.call("setToolbarMenu",{menus:[],override:!0}),o.call("startShare",d.share.startShare,function(e){var n=d.share.shareToChannel;e.channelName?o.call("shareToChannel",{name:e.channelName,param:n},t):t(e)})}},datePicker:{b:function(e){switch(S(e,{_:"formate",formate:"mode",currentDate:"beginDate",startDate:"minDate",endDate:"maxDate"}),e.mode){case"HH:mm:ss":e.mode=0;break;case"yyyy-MM-dd":e.mode=1;break;case"yyyy-MM-dd HH:mm:ss":e.mode=2;break;default:e.mode=1}return e},a:function(e){return J(e.date)&&(e.date=e.date.replace(/\//g,"-").trim()),e}},chooseCity:{m:"getCities",b:function(e){var t,n;function a(e){var t;return $(e)&&(t=[],e.forEach(function(e){t.push(S({},{city:"name",adCode:"adcode%s",spell:"pinyin"},e))}),e=t),e}return S(e,{showHotCities:"needHotCity",cities:"customCities",hotCities:"customHotCities"}),!0===e.showLocatedCity?(e.currentCity="",e.adcode=""):(delete e.currentCity,delete e.adcode),delete e.showLocatedCity,t=e.customCities,q(e.customCities)||(e.customCities=a(t)),n=e.customHotCities,q(e.customHotCities)||(e.customHotCities=a(n)),e},a:function(e){return S(e,{adcode:"adCode"}),e}},onBack:{a:function(e){var t={};return K(d.onBack)?d.onBack.event=e:d.onBack={event:e,allowButton:!0},!1===d.onBack.allowButton&&e.preventDefault(),t.backAvailable=d.onBack.allowButton,t},e:{handleEventData:!1}},offBack:{},onResume:{a:function(e){var t={};return q(e.data)||(t.data=e.data),M(e.data,"___forResume___")&&(t.data=e.data.___forResume___),t},e:{handleEventData:!1}},offResume:{},onPause:{},offPause:{},onPageResume:{a:function(e){var t={};return q(e.data)||(t.data=e.data),M(e.data,"___forResume___")&&(t.data=e.data.___forResume___),t},e:{handleEventData:!1}},offPageResume:{},onPagePause:{},offPagePause:{},onTitleClick:{},offTitleClick:{},onPullDownRefresh:{m:"firePullToRefresh",a:function(e){var t={},n="onPullDownRefresh";return K(d[n])?d[n].event=e:d[n]={event:e,allow:!0},!1===d[n].allow&&d[n].event.preventDefault(),t.refreshAvailable=d[n].allow,t},e:{handleEventData:!1}},offPullDownRefresh:{m:"firePullToRefresh"},onNetworkChange:{d:function(e,t,n,a){var o=function(){return p.getNetworkType(t)};y("h5NetworkChange",a,o),p.on("h5NetworkChange",o)}},offNetworkChange:{d:function(e,t,n,a){w("h5NetworkChange",a)}},onAccelerometerChange:{b:function(){o.call("watchShake",{monitorAccelerometer:!0})},a:function(e){var t={};return S(t,{x:"x",y:"y",z:"z"},K(e.data)?e.data:e),t},e:{handleEventData:!1}},offAccelerometerChange:{b:function(){o.call("watchShake",{monitorAccelerometer:!1})}},onCompassChange:{b:function(){o.call("watchShake",{monitorCompass:!0})},a:function(e){var t={};return S(t,{direction:"direction"},K(e.data)?e.data:e),t},e:{handleEventData:!1}},offCompassChange:{b:function(){o.call("watchShake",{monitorCompass:!1})}},onBackgroundAudioPlay:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioPlay:{},onBackgroundAudioPause:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioPause:{},onBackgroundAudioStop:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioStop:{},onAppResume:{},offAppResume:{},onAppPause:{},offAppPause:{},getNetworkType:{a:function(e){return q(e.networkInfo)||(e.networkType=V(e.networkInfo)),delete e.err_msg,delete e.networkInfo,e}},scan:{b:function(e){return S(e,{_:"type"}),e.type=e.type||"qr",e},a:function(e){return(e.qrCode||e.barCode)&&(e.code=e.qrCode||e.barCode,delete e.qrCode,delete e.barCode),e}},watchShake:{b:function(e){return G(e)&&(e=null),e}},getLocation:{b:function(e){return S(e,{accuracy:"horizontalAccuracy",type:"requestType%d"}),q(e.requestType)&&(e.requestType=2),z()&&(q(e.isHighAccuracy)&&(e.isHighAccuracy=!0),q(e.isNeedSpeed)&&(e.isNeedSpeed=!0)),e},a:function(e){return S(e,{citycode:"cityCode",adcode:"adCode"}),q(e.city)&&e.province&&(e.city=e.province),e.latitude&&(e.latitude=C("%s",e.latitude)),e.longitude&&(e.longitude=C("%s",e.longitude)),e.accuracy&&(e.accuracy=C("%f",e.accuracy)),e.speed&&(e.speed=C("%f",e.speed)),e}},getSystemInfo:{a:function(e){if(!M(e,"error")){e.pixelRatio=C("%f",e.pixelRatio),e.windowWidth=C("%d",e.windowWidth),e.language=(e.language||"").replace(/\s?\w+\/((?:\w|-)+)$/,"$1"),e.windowHeight=C("%d",e.windowHeight);try{U()&&p.compareVersion("10.0.12")<0&&(e.windowHeight=i.screen.height-64)}catch(e){}}return e}},vibrate:{},getServerTime:{},previewImage:{m:"imageViewer",b:function(e){return S(e,{_:"urls",current:"init%d"}),q(e.init)&&(e.init=0),e.images=[],(e.urls||[]).forEach(function(t){e.images.push({u:t})}),delete e.urls,e}},chooseImage:{b:function(e){return S(e,{_:"count%d"}),q(e.count)&&(e.count=1),J(e.sourceType)&&(e.sourceType=[e.sourceType]),e},a:function(e){return S(e,{errorCode:"error",errorDesc:"errorMessage",localIds:"apFilePaths",tempFilePaths:"apFilePaths"}),delete e.scene,delete e.localIds,delete e.tempFilePaths,J(e.apFilePaths)&&(e.apFilePaths=O(e.apFilePaths)),e}},chooseVideo:{b:function(e){return S(e,{_:"maxDuration%d"}),J(e.sourceType)&&(e.sourceType=[e.sourceType]),J(e.camera)&&(e.camera=[e.camera]),e},a:function(e){switch(S(e,{errorCode:"error",errorDesc:"errorMessage",msg:"errorMessage",localId:"apFilePath",tempFilePath:"apFilePath",tempFile:"apFilePath"}),delete e.localId,delete e.tempFilePath,delete e.tempFile,e.error){case 0:delete e.error;break;case 1:e.error=2;break;case 2:e.error=10;break;case 3:e.error=11;break;case 4:e.error=12}return e}},uploadFile:{b:function(e){var t;return S(e,{headers:"header",fileName:"name",fileType:"type"}),t=e.filePath,/^[a-z0-9|]+$/i.test(t)&&(e.localId=e.filePath,delete e.filePath),e},a:function(e){return 2===e.error&&(e.error=11),e}},saveImage:{b:function(e,t){return S(e,{_:"url",url:"src"}),j(t)&&(e.cusHandleResult=!0),e}},downloadFile:{b:function(e){return S(e,{headers:"header"}),e},a:function(e){return S(e,{tempFilePath:"apFilePath",errorCode:"error"}),delete e.tempFilePath,e}},setSessionData:{b:function(e){return K((e=b(e)).data)||(e.data={data:e.data}),N(e.data,function(t,n){e.data[t]=JSON.stringify(n)}),e}},getSessionData:{b:function(e){return J(e._)&&(e.keys=[e._]),$(e._)&&(e.keys=e._),delete e._,e},a:function(e){return N(e.data,function(t,n){e.data[t]=O(n)}),e}},startBizService:{b:function(e){return S(e,{_:"name",params:"param%s"}),e}},tradePay:{b:function(e){return S(e,{_:"orderStr"}),e}},getAuthCode:{b:function(e){return S(e,{_:"scopes"}),J(e.scopes)?e.scopeNicks=[e.scopes]:$(e.scopes)?e.scopeNicks=e.scopes:e.scopeNicks=["auth_base"],delete e.scopes,e},a:function(e){return S(e,{authcode:"authCode"}),e}},getAuthUserInfo:{a:function(e){return S(e,{nick:"nickName",userAvatar:"avatar"}),e}},openInBrowser:{b:function(e){return S(e,{_:"url"})}},openLocation:{b:function(e){return q(e.scale)&&(e.scale=15),e}},showPopMenu:{b:function(e){if(S(e,{_:"items",items:"menus"}),K(d.showPopMenu)?d.showPopMenu.menus={}:d.showPopMenu={menus:{}},$(e.menus)){var t=e.menus;e.menus=[],t.forEach(function(t,n){J(t)&&(t={title:t}),q((t=S(Y({},t),{title:"name%s",tag:"tag%s",badge:"redDot%s"},{tag:n,title:t.title,badge:q(t.badge)?"-1":t.badge})).icon)||(t.icon=C("%b",t.icon)),e.menus.push(t),d.showPopMenu.menus[t.name]=n})}return e},d:function(e,t){!0!==d.showPopMenu.onEvent&&(d.showPopMenu.onEvent=!0,p.on("popMenuClick",function(e){var n={};S(n,{title:"index%d"},{title:K(e.data)&&e.data.title?d.showPopMenu.menus[e.data.title]:"-1"}),t(n)})),o.call("showPopMenu",e,function(e){P("showPopMenu",e)})}},setOptionButton:{m:"setOptionMenu",b:function(e){if(J(e._)&&(e.title=e._,delete e._),$(e._)&&(e.items=e._,delete e._),S(e,{items:"menus",type:"iconType",badge:"redDot%s"}),q(e.icon)||(e.icon=C("%b",e.icon)),K(d.setOptionButton)?d.setOptionButton.menus=[]:d.setOptionButton={menus:[]},$(e.menus)){var t=e.menus;e.menus=[],t.forEach(function(n,a){q((n=S(Y({},n),{type:"icontype",badge:"redDot%s"},{badge:q(n.badge)?"-1":n.badge})).icon)||(n.icon=C("%b",n.icon)),e.menus.unshift(n),d.setOptionButton.menus[t.length-1-a]=a}),e.menus.length>0&&q(e.override)&&(e.override=!0)}if(j(d.setOptionButton.onEvent)&&p.off("optionMenu",d.setOptionButton.onEvent),j(e.onClick)){var n=e.onClick,a=function(e){var t=0,a={};K(e.data)&&W(e.data.index)&&d.setOptionButton.menus.length>0&&(t=d.setOptionButton.menus[e.data.index]),a.index=C("%d",t),n(a)};d.setOptionButton.onEvent=a,!0!==e.reset&&p.on("optionMenu",a),delete e.onClick}return e},d:function(e,t){o.call("setOptionMenu",e,t),U()&&g(t,{}),p.showOptionButton()}},showOptionButton:{m:"showOptionMenu"},hideOptionButton:{m:"hideOptionMenu"},showBackButton:{},hideBackButton:{},allowBack:{d:function(e){S(e,{_:"allowButton"}),e.allowButton=!!q(e.allowButton)||!!e.allowButton,"boolean"==typeof e.allowGesture&&o.call("setGestureBack",{val:e.allowGesture}),K(d.onBack)?d.onBack.allowButton=e.allowButton:(d.onBack={allowButton:e.allowButton},p.onBack()),!1===e.allowButton&&d.onBack.event&&d.onBack.event.preventDefault()}},startRecord:{m:"startAudioRecord",b:function(e){return S(e,{maxDuration:"maxRecordTime%f",minDuration:"minRecordTime%f",bizType:"business"},{maxDuration:e.maxDuration||60,minDuration:e.minDuration||1}),q(e.business)&&(e.business="apm-h5"),e},a:function(e){return S(e,{tempFilePath:"apFilePath",identifier:"apFilePath"}),e}},stopRecord:{m:"stopAudioRecord"},cancelRecord:{m:"cancelAudioRecord"},playVoice:{m:"startPlayAudio",b:function(e){return S(e,{_:"filePath",filePath:"identifier",bizType:"business"}),q(e.business)&&(e.business="apm-h5"),e},a:function(e){return S(e,{identifier:"filePath"}),e}},pauseVoice:{m:"pauseAudioPlay"},resumeVoice:{m:"resumeAudioPlay"},stopVoice:{m:"stopAudioPlay"},makePhoneCall:{d:function(e,t){var n="tel:";S(e,{_:"number"}),n+=e.number,o.call("openInBrowser",{url:n},t)}},playBackgroundAudio:{b:function(e){return S(e,{_:"url",url:"audioDataUrl%s",title:"audioName%s",singer:"singerName%s",describe:"audioDescribe%s",logo:"audioLogoUrl%s",cover:"coverImgUrl%s",bizType:"business"},{bizType:e.bizType||"apm-h5"}),e},a:function(e){return S(e,{describe:"errorMessage"}),k(e,12,0),e}},pauseBackgroundAudio:{a:function(e){return S(e,{describe:"errorMessage"}),k(e,12,0),e}},stopBackgroundAudio:{a:function(e){return S(e,{describe:"errorMessage"}),k(e,12,0),e}},seekBackgroundAudio:{b:function(e){return S(e,{_:"position",bizType:"business"},{bizType:e.bizType||"apm-h5"}),e.position=C("%f",e.position),e},a:function(e){return S(e,{describe:"errorMessage"}),k(e,12,0),e}},getBackgroundAudioPlayerState:{a:function(e){return S(e,{audioDataUrl:"url",describe:"errorMessage"}),k(e,12,0),e}}},p={version:"3.1.0",ua:r,isAlipay:E(/AlipayClient/),alipayVersion:(n=r.match(/AlipayClient[a-zA-Z]*\/(\d+(?:\.\d+)+)/),n&&n.length?n[1]:""),compareVersion:function(e){var t=p.alipayVersion.split(".");e=e.split(".");for(var n,a,o=0;o<t.length;o++){if((n=s(e[o],10)||0)>(a=s(t[o],10)||0))return-1;if(n<a)return 1}return 0},parseQueryString:function(e){var t,n={},a=e||i.location.search,o={true:!0,false:!1};a=(a=0===a.indexOf("?")?a.substr(1):a)?a.split("&"):"";for(var r=0;r<a.length;r++)(t=a[r].split("="))[1]=decodeURIComponent(t[1]),t[1]=q(o[t[1]])?t[1]:o[t[1]],n[t[0]]=t[1];return A("parseQueryString"),n},enableDebug:function(){p.debug=!0},on:function(e,t){var n="ready"===e;n||"back"===e?u.addEventListener(n?a+"Ready":e,t,!1):(e=e.replace(/ready/,a+"Ready")).split(/\s+/g).forEach(function(e){u.addEventListener(e,t,!1)})},off:function(e,t){u.removeEventListener(e,t,!1)},trigger:function(e,t){var n=u.createEvent("Events");return n.initEvent(e,!1,!0),n.data=t||{},u.dispatchEvent(n),n},ready:function(e){if(I())return new Promise(t);function t(t){m()?(j(e)&&e(),j(t)&&t()):p.on("ready",function(){m(),j(e)&&e(),j(t)&&t()})}t()},localLog:function(){var e=Z(arguments);e.forEach(function(t,n){e[n]=x(t)}),U()&&p.ready(function(){o.call("H5APLog",{content:e.join("  ")})}),c.log.apply(c,e),A("localLog")},call:function(){var e=Z(arguments);if(I())return p.ready().then(function(){return new Promise(t)});function t(t,n){var a,r,i,u,s,l,d,m,h,g;a=e[0]+"",r=e[1],q(i=e[2])&&j(r)&&(i=r,r={}),!K(r)&&e.length>=2&&(r={_:r}),q(r)&&(r={}),u=function(e,t,n){var a=f[e],o=a&&a.b?a.b(Y({},t),n):t,r=B(e,"optionModifier");if(j(r)){var i=r(o,n);K(i)&&(o=i)}return o}(a,r,i),s=function(e,t){var n={};j((t=t||{}).success)&&(n.success=t.success,delete t.success);j(t.fail)&&(n.fail=t.fail,delete t.fail);j(t.complete)&&(n.complete=t.complete,delete t.complete);return n}(0,u),q(u)&&c.error("please confirm "+a+".before() returns the options."),h=function(e){var t=f[e];return!(!t||!t.d)&&t.d}(a),g=M(r,"_")?r._:r,T(a,g,u),d=function(e){return _("on",e)}(a),m=function(e){return _("off",e)}(a),l=function(e){var o=void 0;e=e||{},d&&!1!==B(a,"handleEventData")&&(o=function(e){var t={};q(e.data)||(t=K(t=e.data)?t:{data:t});return t}(e)),q(o=function(e,t,n,a,o){var r=f[e],i=r&&r.a?r.a((c=t,"[object Event]"===Q(c)?t:Y({},t)),n,a,o):Y({},t),u=B(e,"resultModifier");var c;if(j(u)){var s=u(i,n,a,o);K(s)&&(i=s)}return i}(a,o||e,u,r,i))&&c.error("please confirm "+a+".after() returns the result."),o=P(a,o),T(a,g,u,e,o),M(o,"error")||M(o,"errorMessage")?(j(n)&&n(o),j(s.fail)&&s.fail(o)):(j(t)&&t(o),j(s.success)&&s.success(o)),j(s.complete)&&s.complete(o),j(i)&&i(o)},j(h)?h(u,l,r,i):d?(y(d,i,l,s),p.on(d,l)):m?w(m,i):o.call(function(e){var t=f[e];return t&&t.m?t.m:e}(a),u,l),A(a)}m()?t():l.push(e)},extendJSAPI:function(e,t){!t&&J(e)&&(e=[e]),N(e,function(n){var a=n;if(!0!==t){var o=e[a];j(o)&&(o={doing:o}),J(o)&&(a=o,(o={})[a]={}),f[a]=S(f[a]||{},{mapping:"m",before:"b",doing:"d",after:"a"},o),K(o.extra)&&(f[a].e=f[a].e||{},f[a].e=Y(f[a].e,o.extra))}p[a]=p.call.bind(null,a)},!0)}};function m(){return(o=o||e[a])&&o.call}function h(){return(e&&e.location&&e.location.href?e.location.href:"").replace(/^(http|https):\/\//i,"").split("/")[0]}function g(e,t){setTimeout(function(){e(t)},1)}function b(e,t){var n=!1;return t=t||"data",M(e,"_")?(e[t]=e._,delete e._):(N(e,function(e){e!==t&&(n=!0)}),n&&(n=e,(e={})[t]=n)),e}function v(e,t,n){var a,o=!1;return q(e)||(d.EVENTS||(d.EVENTS={}),d.EVENTS[e]||(d.EVENTS[e]={callbacks:[]}),d.EVENTS[e].callbacks||(d.EVENTS[e].callbacks=[]),d.EVENTS[e].callbacks.forEach(function(e,n){e.cb===t&&(o=e,a=n)}),n&&W(a)&&d.EVENTS[e].callbacks.splice(a,1)),o}function y(e,t,n,a){v(e,t)||d.EVENTS[e].callbacks.push({cb:t,_cb:n,_cbSFC:a})}function w(e,t){var n=v(e,t,!0);j(t)?n&&p.off(e,n._cb):(d.EVENTS[e].callbacks.forEach(function(t){p.off(e,t._cb)}),d.EVENTS[e].callbacks=[])}function _(e,t){var n=f[t],a=!1,o="off"===e?/^off([A-Z])(\w+)/:/^on([A-Z])(\w+)/;return n&&o.test(t)&&(t=t.match(o),!(a=n.m)&&t[1]&&t[2]&&(a=F(t[1])+t[2])),a}function B(e,t){var n=f[e]||{};return(n.e||n.extra||{})[t]}function P(e,t){return M(t,"error")&&(t.error=s(t.error,10)),!1!==B(e,"handleResultSuccess")&&k(t),0===t.error&&(delete t.error,delete t.errorMessage),t.error>0&&t.error<10&&c.error(e,t),t}function k(e,t,n){return n=!q(n)&&n,M(e,"error")||e.success!==n||(e.error=W(t)?t:2),delete e.success,e}function C(e,t){return"%s"===e&&(t=x(t)),"%c"===e&&(t=function(e){var t=""+e;0===t.indexOf("#")&&(t=t.substr(1));3===t.length&&(t=t.replace(/(.)/g,"$1$1"));H(t=s(t,16))&&c.error(e+" is invalid hex color.");return t}(t)),"%b"===e&&(t=function(e){J(e)&&(e=e.replace(/^data:(\/|\w|\-|\.)+;base64,/i,""));return e}(t)),"%d"===e&&(t=s(t,10)),"%f"===e&&(t=parseFloat(t)),t}function S(e,t,n){var a;return n=n||{},N(t,function(o,r){var i,u,c;i=t[o],u=(i||"").match(/(\w+)(%\w)$/i),c={k:i},u&&(c.k=u[1],c.t=u[2]),!q(r=(a=c).k)&&(M(e,o)||M(n,o))&&q(e[r])&&(e[r]=C(a.t,q(n[o])?e[o]:n[o]),r!==o&&delete e[o])}),e}p.extendJSAPI.mapping=S,p.extendJSAPI.toType=C,p.isAlipay||c.warn("Run alipayjsapi.js in Alipay please!"),p.extendJSAPI(f,!0),p.on("ready",function(){l.length&&function e(){D(function(){var t=l.shift();p.call.apply(null,t),l.length&&e()})}()});var A=function(){var e=[],t=void 0,n=!1;function a(){setTimeout(function(){if(e.length>0){var a=e.join("|");p.ready(function(){o.call("remoteLog",{type:"monitor",bizType:"ALIPAYJSAPI",logLevel:1,actionId:"MonitorReport",seedId:"ALIPAYJSAPI_INVOKE_COUNTER",param1:a})}),p.debug&&c.info("REMOTE_LOG_QUEUE>",e),e=[]}!q(t)&&clearTimeout(t),n=!1},0)}return p.on("back",function(){a()}),function(o){e.push(o),e.length>=6?a():n||(n=!0,t=setTimeout(function(){a()},5e3))}}();function T(){var e,t,n,a,o,r,i=Z(arguments);p.debug&&(e=i[0],t=i[1],n=i[2],a=i[3],o=i[4],r=[i.length>3?"RETURN>":"INVOKE>",e,M(t,"_")?t._:t,n],i.length>3&&r.push(a),i.length>4&&r.push(o),c.info(r))}function E(e){return e.test(r)}var D=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.msRequestAnimationFrame||function(e,t){i.setTimeout(function(){e(+new Date,t)},1e3/60)};function I(){if(void 0===t){var n=!1,a=e.Promise;if(a){var o=null,r=null;try{r=(o=a.resolve()).then}catch(e){}o instanceof a&&j(r)&&!a.cast&&(n=!0)}n||c.warn("try callback since no Promise detected"),t=n}return t}function x(e){var t=e;if(K(e)||$(e))try{t=JSON.stringify(e)}catch(e){}else t=e+"";return t}function L(e){var t=[];return N(e,function(e,n){t.push(e+"="+encodeURIComponent(q(n)?"":n))}),t=t.join("&")}function R(e,t){var n=t;return K(t)&&(n=L(t)),/\?/.test(e)?/&$/.test(e)||/\?$/.test(e)||(n="&"+n):n="?"+n,e+n}function M(e,t){return!(!K(e)&&!$(e))&&e.hasOwnProperty(t)}function N(e,t,n){var a,o;if(!n&&function(e){return!!e&&!j(e)&&($(e)||W(e.length))}(e)){for(a=0;a<e.length;a++)if(!1===t(a,e[a]))return e}else for(o in e)if(!1===t(o,e[o]))return e;return e}function O(e){try{e=JSON.parse(e)}catch(t){c.warn(t,e)}return e}function F(e){return J(e)&&(e=e.toLowerCase()),e}function V(e){return J(e)&&(e=e.toUpperCase()),e}function z(){return E(/android/i)}function U(){return E(/iPad|iPod|iPhone|iOS/i)}function q(e){return"[object Undefined]"===Q(e)}function H(e){return"NaN"===s(e,10).toString()}function j(e){return"[object Function]"===Q(e)}function J(e){return"string"==typeof e}function K(e){return"[object Object]"===Q(e)}function W(e){return"[object Number]"===Q(e)}function $(e){return"[object Array]"===Q(e)}function Q(e){return Object.prototype.toString.call(e)}function G(e){for(var t in e)return!1;return!0}function Z(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.length-t,a=new Array(n),o=0;o<n;o++)a[o]=e[o+t];return a}function Y(e){var t,n,a=Z(arguments,1);if(!K(e))return e;for(var o=0,r=a.length;o<r;o++)for(n in t=a[o])hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}e._AP=p,"undefined"!=typeof module&&module.exports?module.exports=p:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return p}):e.ap=e.AP=p}(self);