"use strict";exports.__esModule=!0,exports.ComponentDecoratorGenerator=ComponentDecoratorGenerator;var _vue=require("vue"),_vue2=_interopRequireDefault(_vue),_index=require("../property/index.js"),_utils=require("../utils"),_connect=require("../connect");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var metaKeys=["props","computed","watch"];function generateOptionFromMeta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments[1];return e.name=e.name||o,metaKeys.forEach(function(o){(0,_utils.hasOwn)(e,o)||(e[o]={})}),e}function generateKeysFromProto(e){var o=[],t=[];return Object.getOwnPropertyNames(e).forEach(function(e){"constructor"!==e&&(!function(e){return"$$"===String.prototype.substr.call(e,0,2)}(e)?t.push(e):o.push(e))}),{internalKeys:o,normalKeys:t}}function collectInternalProp(e,o,t){(0,_index.PropertyProcessor)(e,o,t)}var lifecycleHooks=_vue2.default.config._lifecycleHooks,lifecycHookMap=(0,_utils.makeMap)(lifecycleHooks,!0);function collectNormalProp(e,o,t){var r=Object.getOwnPropertyDescriptor(e,o);if(r){_vue2.default.config._lifecycleHooks;"function"==typeof r.value?lifecycHookMap[o]?(t[o]=t[o]||[],t[o]=Array.isArray(t[o])?t[o]:[t[o]],t[o].push(r.value)):"render"===o?t[o]=r.value:(t.methods=t.methods||{},t.methods[o]&&(0,_utils.warn)("member method ["+o+"] has duplicated definitions"),t.methods[o]=r.value):(r.get||r.set)&&(t.computed[o]={get:r.get,set:r.set})}}function ComponentDecoratorGenerator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=null,t=!1,r=!1;return(0,_connect.hasConnectProperty)(e)&&(t=!!e.mapExec,r=void 0!==e.mapExec,o=(0,_connect.generateConnectFunc)(e)),function(n){var c=n.prototype,a=generateOptionFromMeta(e,n.name),i=generateKeysFromProto(c),u=i.internalKeys,l=i.normalKeys;if(u.forEach(function(e){collectInternalProp(c,e,a)}),l.forEach(function(e){collectNormalProp(c,e,a)}),(0,_index.modifyProperty)(a),o)if(r)t?a=o(a):a.__kylin_connect_function__=o;else{var s=o(a);s.__kylin_connect_wrap__={func:o,options:a},a=s}return a}}