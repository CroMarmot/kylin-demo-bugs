"use strict";exports.__esModule=!0,exports.createConnect=void 0,exports.hasConnectProperty=hasConnectProperty;var _vue=require("vue"),_vue2=_interopRequireDefault(_vue),_vuex=require("vuex"),_utils=require("./utils"),_utils2=require("../utils");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var connectProperties={mapStateToProps:!0,mapMethodsToProps:!0,mapMethodsToEvents:!0,mapEvents:!0,mapMethods:!0,mapActionsToMethods:!0,mapMutationsToMethods:!0};function hasConnectProperty(t){if(!t)return!1;var e=!1;return Object.keys(t).forEach(function(t){e=e||connectProperties[t]}),e}var connectEmitArgChildToParent="$$__child_to_parent__$$",connectEmitArgParentToChild="$$__parent_to_child__$$",createConnect=exports.createConnect=function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,_utils.mapValues)(t,normalizeOptions),n=e.mapStateToProps,o=void 0===n?{}:n,r=e.mapMethodsToProps,i=void 0===r?{}:r,s=e.mapMethodsToEvents,a=void 0===s?{}:s,c=e.mapActionsToMethods,u=void 0===c?{}:c,p=e.mapMutationsToMethods,l=void 0===p?{}:p,d=e.mapMethods,h=void 0===d?[]:d,m=e.mapEvents,f=void 0===m?[]:m,_=o,v=i,y=a,g=(0,_utils.keys)(f),T=!0===h,M=!h||0===h.length,A=T||M?[]:(0,_utils.keys)(h),E=l,C=u;return function(t,e){"string"!=typeof t&&(t=getOptions(e=t).name||"wrapped-anonymous-component");var n=(0,_utils.keys)(_,v),o=(0,_utils.keys)(y);applyStoreMapToComponent(e,E,C);var r={};if(!M){var i=getOptions(e).methods||{};r=(0,_utils.pick)(i,T?Object.keys(i):A)}var s=(0,_utils.omit)(getOptions(e).props||{},n),a={};a[t]=e;var c={name:"connect-"+t,props:s,components:a,computed:(0,_vuex.mapState)(_),methods:(0,_utils.merge)((0,_utils.mapValues)((0,_utils.merge)(v,y),bindStore),(0,_utils.mapValues)((0,_utils.merge)(r),bindMethodsTransport)),beforeCreate:[function(){var t=this;g.forEach(function(e){var n=t;n.$on(e,function(t){if(arguments[arguments.length-1]!==connectEmitArgChildToParent){var o=[e].concat((0,_utils.toArray)(arguments));o.push(connectEmitArgParentToChild),n.$refs.child.$emit.apply(n.$refs.child,o)}})})}]};return insertRenderer(c,t,n.concat(Object.keys(s)),o,g),c}}};function insertRenderer(t,e,n,o,r){t.render=function(t){return t(e,{props:(0,_utils.pick)(this,n),on:(0,_utils.merge)((0,_utils.pick)(this,o),bindEventEmit(this,r)),ref:"child"})}}function bindEventEmit(t,e){var n={};return e.forEach(function(e){n[e]=function(){if(arguments[arguments.length-1]!==connectEmitArgParentToChild){var n=[e].concat((0,_utils.toArray)(arguments));n.push(connectEmitArgChildToParent),t.$emit.apply(t,n)}}}),n}function getOptions(t){return"function"==typeof t?t.options:t}function bindStore(t){return function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.call.apply(t,[this,this.$store].concat(n))}}function bindMethodsTransport(t,e){return function(){var t=this.$refs.child;if("function"==typeof t[e]){for(var n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=t[e]).call.apply(n,[t].concat(r))}}}function normalizeOptions(t){return Array.isArray(t)?t.reduce(function(t,e){return t[e]=e,t},{}):t}function applyStoreMapToComponent(t,e,n){try{var o=getOptions(t);o.methods=o.methods||{},e&&Object.keys(e).length&&(0,_utils2.objectAssign)(o.methods,(0,_vuex.mapMutations)(e)),n&&Object.keys(n).length&&(0,_utils2.objectAssign)(o.methods,(0,_vuex.mapActions)(n))}catch(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}}