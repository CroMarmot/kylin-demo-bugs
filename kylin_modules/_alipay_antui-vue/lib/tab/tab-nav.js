'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function e(e,f){for(var b=0;b<f.length;b++){var c=f[b];c.enumerable=c.enumerable||false;c.configurable=true;if('value'in c)c.writable=true;Object.defineProperty(e,c.key,c)}}return function(a,b,c){if(b)e(a.prototype,b);if(c)e(a,c);return a}}();function _classCallCheck(c,a){if(!(c instanceof a)){throw new TypeError('Cannot call a class as a function')}}var ScrollTab=function(){function e(a,b){var c=b.onVisibilityChange;_classCallCheck(this,e);this.element=a;this.init();this.offset=0;this.startX=null;this.minOffset=null;this.halfReduction=null;this.onVisibilityChange=c}_createClass(e,[{key:'init',value:function init(){var c=this;['scrollStart','scrollMove','scrollEnd'].forEach(function(a){c[a]=c[a].bind(c)});this.element.addEventListener('touchstart',this.scrollStart,true);this.element.addEventListener('touchmove',this.scrollMove,true);this.element.addEventListener('touchend',this.scrollEnd,true);this.element.addEventListener('touchcancel',this.scrollEnd,true)}},{key:'getMinOffset',value:function getMinOffset(){return this.element.parentElement.getBoundingClientRect().width-this.element.getBoundingClientRect().width}},{key:'getHalfReduction',value:function getHalfReduction(){return this.element.parentElement.getBoundingClientRect().width/4}},{key:'canScroll',value:function canScroll(){return this.element.parentElement.getBoundingClientRect().width<this.element.getBoundingClientRect().width}},{key:'reachedLeft',value:function reachedLeft(){return this.offset-10<=this.getMinOffset()}},{key:'reachedRight',value:function reachedRight(){return this.offset>=-10}},{key:'scrollStart',value:function scrollStart(b){if(!this.canScroll()){return}this.startX=b.touches[0].pageX;this.minOffset=this.getMinOffset();this.halfReduction=this.getHalfReduction()}},{key:'scrollMove',value:function scrollMove(d){if(this.startX===null){return}var a=d.changedTouches[0].pageX-this.startX;var b=this.offset+a;if(this.onVisibilityChange){console.log(b);if(b<=-50){this.onVisibilityChange('left',false)}else if(b>-50){this.onVisibilityChange('left',true)}if(b>=this.minOffset+50){this.onVisibilityChange('right',false)}else if(b<this.minOffset+50){this.onVisibilityChange('right',true)}}if(this.offset+a>0&&a>0){a=a/(b/this.halfReduction+1)}else if(this.offset+a<this.minOffset&&a<0){a=a/((this.minOffset-b)/this.halfReduction+1)}this.scrollTo(this.offset+a)}},{key:'scrollEnd',value:function scrollEnd(b){this.offset+=b.changedTouches[0].pageX-this.startX;this.startX=null;if(this.offset>0){this.offset=0;this.scrollTo(0)}else if(this.offset<this.minOffset){this.offset=this.minOffset;this.scrollTo(this.minOffset)}}},{key:'scrollTo',value:function scrollTo(b){this.element.style.transform='translateX('+b+'px)'}},{key:'dispose',value:function dispose(){this.element.removeEventListener('touchstart',this.scrollStart);this.element.removeEventListener('touchmove',this.scrollMove);this.element.removeEventListener('touchend',this.scrollEnd);this.element.removeEventListener('touchcancel',this.scrollEnd)}}]);return e}();exports.default=ScrollTab;