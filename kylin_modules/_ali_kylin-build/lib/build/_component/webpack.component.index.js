"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};exports.default=webpackComponentIndexConfig;var _webpackMerge=require("webpack-merge"),_webpackMerge2=_interopRequireDefault(_webpackMerge),_extractTextWebpackPlugin=require("extract-text-webpack-plugin"),_extractTextWebpackPlugin2=_interopRequireDefault(_extractTextWebpackPlugin),_webpack=require("webpack"),_webpack2=_interopRequireDefault(_webpack),_index=require("../utils/index"),_index2=require("../../utils/index"),_path=require("path"),_path2=_interopRequireDefault(_path),_ls=require("ls"),_ls2=_interopRequireDefault(_ls),_assert=require("assert"),_assert2=_interopRequireDefault(_assert),_webpackProgressPlugin=require("../plugin/webpackProgressPlugin"),_webpackProgressPlugin2=_interopRequireDefault(_webpackProgressPlugin),_cleanEmptyChunk=require("../plugin/clean-empty-chunk"),_cleanEmptyChunk2=_interopRequireDefault(_cleanEmptyChunk),_plugins=require("@ali/vue-pre-loader/lib/plugins"),_plugins2=_interopRequireDefault(_plugins),_standaloneLoader=require("../loader/standalone-loader"),_standaloneLoader2=_interopRequireDefault(_standaloneLoader),_entry=require("./entry"),_getUglifyJsPlugin=require("../plugin/getUglifyJsPlugin"),_getUglifyJsPlugin2=_interopRequireDefault(_getUglifyJsPlugin);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function webpackComponentIndexConfig(e,r,t){const a=require("./webpack.component.base")(e,_extends({},r,{output:""}));a.entry=(0,_entry.resolveEntry)(e,r);const n=a.module.loaders;for(const t in n)n[t].test.toString()===/\.vue$/.toString()?(n[t].loader=require.resolve("@ali/vue-pre-loader"),n[t].query=JSON.stringify({baseRelativeTo:_path2.default.resolve(e.cwd,r.sourceDir),compressHTML:!!e.compress&&{caseSensitive:!0,keepClosingSlash:!0}})):n[t].test.toString()===/\.js$/.toString()&&(n[t].loader=require.resolve("../loader/standalone-loader"));return a.plugins.push(new _plugins2.default),(0,_webpackMerge2.default)(a,{vue:{loaders:(0,_index.cssLoaders)({sourceMap:!e.prod,extract:!1})},module:{loaders:(0,_index.styleLoaders)({sourceMap:!e.prod,extract:!1,postcss:!0,emit:!0})},plugins:[new _cleanEmptyChunk2.default,(0,_webpackProgressPlugin2.default)(),(0,_getUglifyJsPlugin2.default)(e)].filter(Boolean)})}module.exports=exports.default;