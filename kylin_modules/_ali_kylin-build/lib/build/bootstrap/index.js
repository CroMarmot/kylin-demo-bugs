"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getProgramFromProcess=getProgramFromProcess,exports.getBuildTypeFunc=getBuildTypeFunc,exports.default=run;var _co=require("co"),_co2=_interopRequireDefault(_co),_commander=require("commander");function _interopRequireDefault(o){return o&&o.__esModule?o:{default:o}}function getProgramFromProcess(o,e){const n=new _commander.Command;return n.allowUnknownOption().option("-t, --type <type>",'build type ["project", "component", "component-old"]').option("--dev","dev").option("--server","start server").option("--https","start server with https").option("--no-prod","不使用prod配置构建").option("--verbose","run with more logging messages.").option("--watch","start watch").option("--no-compress","build without compress").option("--hot","enable hot-module-replace").option("--open [entry]","open entry url in browser").option("--no-common","disable common chunk").option("--qrcode [entry]","open entry with qrcode").option("--hpm-domain","apply hpm domain").option("--sim [entry]","hpm sim start [entryUrl]").option("--mock [mockConfigFile]","using luna-mock").option("--no-order").option("--sourcemap [sourcemapType]","sourcemap type [eval, cheap, module]-source-map").option("--config-path <kylinConfig>","using specific kylin config path not in package.json").parse("string"==typeof o?o.split(" "):o),n.type=n.type||"project",n.cwd=e||process.cwd(),n}function getBuildTypeFunc(){let o;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"project"){case"project":o=require("../project/index.js");break;case"component-old":o=require("../component/index.js");break;case"component":o=require("../_component/index.js");break;default:console.error("Unknown Build Type, only ['project', 'component', 'component-old'] avaliable and 'project' is default ")}return o}function run(){const o=getProgramFromProcess(process.argv,process.cwd()),e=getBuildTypeFunc(o.type);return function(){return(0,_co2.default)(function*(){yield e(o)})}}