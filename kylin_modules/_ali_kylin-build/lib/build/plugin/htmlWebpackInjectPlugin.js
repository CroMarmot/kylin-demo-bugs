"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _safe=require("colors/safe"),_safe2=_interopRequireDefault(_safe),_index=require("../../utils/index");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function HtmlWebpackInjectPlugin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.js?this.resourceJs=Object.assign({},e.js):this.resourceJs={},e&&e.css?this.resourceCss=Object.assign({},e.css):this.resourceCss={}}function extend(){var e=Array.prototype.slice.call(arguments),t=e.shift()||{},s=e.shift(),n=e.length;for(var u in s)s.hasOwnProperty(u)&&(t[u]=s[u]);return e.unshift(t),n>0?extend.apply(null,e):t}HtmlWebpackInjectPlugin.prototype.apply=function(e){let t=this.resourceJs,s=this.resourceCss;e.plugin("compilation",function(e){var n={},u={};e.plugin("optimize-tree",function(e,r,i){r.forEach(function(e){(s[e.request]||t[e.request])&&e.chunks.forEach(function(r){s[e.request]&&(u[r.name]=u[r.name]||[],u[r.name].unshift(s[e.request])),t[e.request]&&(n[r.name]=n[r.name]||[],n[r.name].unshift(t[e.request]))})}),i()}.bind(this)),e.plugin("html-webpack-plugin-before-html-generation",function(e,t){Object.keys(e.assets.chunks).reverse().forEach(t=>{u[t]&&u[t].forEach(function(s){(0,_index.hint)("[Resource]",`${_safe2.default.blue(t)}: ${_safe2.default.blue(s)}`),e.assets.css.unshift(s)}),n[t]&&n[t].forEach(function(s){(0,_index.hint)("[Resource]",`${_safe2.default.blue(t)}: ${_safe2.default.blue(s)}`),e.assets.js.unshift(s)})}),t(null,e)})})},exports.default=HtmlWebpackInjectPlugin,module.exports=exports.default;