"use strict";var nunjucks=require("nunjucks"),path=require("path");function getQueryString(e,n){var r=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=e.query.substr(1).match(r);return null!=t?unescape(t[2]):null}module.exports=function(e){this.cacheable&&this.cacheable();var n=this;e=e.replace(/{%[ ]+extends[ ]+(.*?)[ ]+%}/g,function(e,r){var t=(r=r.substring(1,r.length-1)).substring(0,1);return"."!==t&&"/"!==t?e:(0===r.indexOf("/")&&(r=r.substring(1)),r=path.resolve(n.context,r),n.addDependency(r),"{% extends "+JSON.stringify(r)+" %}")});try{var r=n.resourcePath,t=getQueryString(n,"data"),u={};return t&&(t=JSON.parse(t))[r]&&(u=t[r]),nunjucks.configure(null,{watch:!1,noCache:!0}),nunjucks.renderString(e,u)}catch(e){throw console.error("nunjucks-loader:"+e),e}};