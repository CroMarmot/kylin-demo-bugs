"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=webpackProdConfig;var _webpack=require("webpack"),_webpack2=_interopRequireDefault(_webpack),_webpackMerge=require("webpack-merge"),_webpackMerge2=_interopRequireDefault(_webpackMerge),_index=require("../utils/index"),_entry=require("../project/entry"),_extractTextWebpackPlugin=require("extract-text-webpack-plugin"),_extractTextWebpackPlugin2=_interopRequireDefault(_extractTextWebpackPlugin),_webpackProgressPlugin=require("../plugin/webpackProgressPlugin"),_webpackProgressPlugin2=_interopRequireDefault(_webpackProgressPlugin),_htmlWebpackInjectPlugin=require("../plugin/htmlWebpackInjectPlugin"),_htmlWebpackInjectPlugin2=_interopRequireDefault(_htmlWebpackInjectPlugin),_globalResource=require("../plugin/globalResource"),_getUglifyJsPlugin=require("../plugin/getUglifyJsPlugin"),_getUglifyJsPlugin2=_interopRequireDefault(_getUglifyJsPlugin);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function*webpackProdConfig(e,a,n){const t=yield(0,_entry.getHtmlPluginArray)(e,a),s=require("../config/webpack.base.conf")(e,a,n);s.resolve.alias=Object.assign({},s.resolve.alias,a.dirAlias);const i={name:"common"};return void 0!==a.options.minChunks&&(i.minChunks=a.options.minChunks),(0,_webpackMerge2.default)(s,{module:{loaders:(0,_index.styleLoaders)({sourceMap:!!e.sourcemap,extract:!0,publicPath:"../",postcss:!0})},devtool:e.sourcemap,output:{path:n.assetsRoot,filename:(0,_index.assetsPath)(a.options.enableChunkHashName?"js/[name].[hash:7].js":"js/[name].js"),chunkFilename:(0,_index.assetsPath)(a.options.enableChunkHashName?"js/[id].[chunkhash:7].js":"js/[id].js")},vue:{loaders:(0,_index.cssLoaders)({sourceMap:!!e.sourcemap,extract:!0,publicPath:"../"})},plugins:[new _htmlWebpackInjectPlugin2.default({js:Object.assign({},_globalResource.js),css:Object.assign({},_globalResource.css)}),(0,_webpackProgressPlugin2.default)(),new _webpack2.default.DefinePlugin({"process.env":{NODE_ENV:'"production"'}}),(0,_getUglifyJsPlugin2.default)(e),e.order?new _webpack2.default.optimize.OccurenceOrderPlugin:null,new _extractTextWebpackPlugin2.default((0,_index.assetsPath)(a.options.enableChunkHashName?"css/[name].[hash:7].css":"css/[name].css")),e.common?new _webpack2.default.optimize.CommonsChunkPlugin(i):null].concat(t).filter(Boolean)})}module.exports=exports.default;