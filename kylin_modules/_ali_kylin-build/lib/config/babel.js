"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.babelConfig=babelConfig,exports.babelConfigFactory=babelConfigFactory;var _getBabelCommonConfig=require("../build/config/getBabelCommonConfig"),_getBabelCommonConfig2=_interopRequireDefault(_getBabelCommonConfig),_options=require("./options");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function babelConfig(e){const o=(e=(0,_options.userOption)(e)).options;return(0,_getBabelCommonConfig2.default)({},{options:o})}function babelConfigFactory(e,o){(o=(0,_options.userOption)(o)).options;return e.presets=e.presets||[],e.plugins=e.plugins||[],compactJSX(e,o),compactDecorator(e,o),compactES2015(e,o),e}function compactES2015(e,o){const n=o.options;o.forceES2015Nebula&&(e.presets.forEach(function(o,n){const r="string"==typeof o?o:o[0];/es2015/i.test(r)&&e.presets.splice(n,1)}),e.presets.push([require.resolve("@ali/babel-preset-es2015-nebula"),{enableTypeofSymbol:n.enableTypeofSymbol,enableGenerator:n.enableGenerator,enableForOfArray:n.enableForOfArray,nebulaTarget:n.nebulaTarget,loose:n.enableES6LooseTrue,preferExternalPromise:n.preferExternalPromise}]))}function compactJSX(e,o){let n=!1;e.presets.forEach(function(r,t){const a="string"==typeof r?r:r[0],s=/react/i.test(a);n=n||s,o.forceVueJSX&&s&&e.presets.splice(t,1)}),e.plugins.forEach(function(r,t){const a="string"==typeof r?r:r[0],s=/react/i.test(a);n=n||s,o.forceVueJSX&&s&&e.plugins.splice(t,1)}),n&&!o.forceVueJSX||e.plugins.push([require.resolve("babel-plugin-transform-vue-jsx")])}function compactDecorator(e,o){const n=o.options;if(n.enableDecorator){let o=!1;e.plugins.forEach(function(n,r){const t="string"==typeof n?n:n[0],a=/babel-plugin-transform-decorators-legacy/i.test(t),s=/babel-plugin-transform-class-properties/i.test(t);(a||s)&&(e.plugins.splice(r,1),o=!0)}),e.plugins=e.plugins.concat([n.enableDecoratorInject?[require.resolve("@ali/babel-plugin-decorators-inject"),{className:"Component",PropertyName:"Property",propertyIgnoreName:"Property",enableComponentLazyRequire:n.enableComponentLazyRequire,enableRenderInjectH:!1,injectComponentName:n.enableInjectComponentName}]:null,require.resolve("babel-plugin-transform-decorators-legacy"),require.resolve("babel-plugin-transform-class-properties")].filter(Boolean))}}